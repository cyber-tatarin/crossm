<!DOCTYPE html>
{% load static %}
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="{% static 'css/style.css' %}">
        <title>Document</title>
    </head>
    <body>

    {% include "base.html" %}

{% block content %}

        <main class="main">
            <div class="container-padding">
            <div class="container-main">

                    {% if owner %}

                <div class="profile">
                    <div class="profile-owner">

                         <div class="profile-user-left">

                            <div class="profile-user__logo">
                                {% if company.photo %}
                                <img class="profile-user__img" src="{{company.photo.url}}">
                                <a href="#" class="delete-photo">Удалить фото</a>
                                {% else %}
                                {% endif %}
                            </div>

                        </div>
                        <div class="profile-user-right">
                            <h1 class="profile-user__name">{{company.title}}</h1>
                            <div class="owner-info">
                                <div class="owner-info-item">
                                    <span class="profile-user__city">Страна:&nbsp</span>
                                    <span class="profile-user__city__name">{{company.country_of_res.country}}</span>
                                </div>
                            
                                <div class="owner-info-item">
                                    <span class="profile-user__city">УНП:&nbsp</span>
                                    <span class="profile-user__city__name">{% if company.status %} {{company.status}} {% else %} Не проверен {%endif %}</span>
                                </div>
                          
                                <div class="owner-info-item">
                                    <span class="profile-user__city">Ниша:&nbsp</span>
                                    <span class="profile-user__city__name">{{company.niche}}</span>
                                </div>
                            
                                <div class="owner-info-item">
                                    <a style="display: block;" href="{{company.link}}" style="margin-bottom: 28px;" class="company-link">{{company.link}}</a>
                                </div>
                            </div>
                            <div class="profile-user__buttons">
                                <div class="button-240px">
                                    <button class="button" onclick="window.location.href = '{% url 'companies:update-company' company.id %}'">
                                        <p class="button-p">Редактировать компанию</p>
                                    </button> 
                                </div>
                                <div class="button-240px">
                                    <button class="button" >
                                        <p class="button-p">Удалить компанию</p>
                                    </button> 
                                </div>
                                <div class="button-240px">
                                    <button class="button" onclick="window.location.href = '{% url 'offers:create-offer' company.id %}'">
                                        <p class="button-p">Добавить предложение</p>
                                    </button> 
                                </div>
                                <div class="button-240px">
                                    <button class="button button-ynp">
                                        <p class="button-p">Проверить УНП</p>
                                    </button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                {% else %}

                <div class="profile">
                    <div style="align-items: center;" class="profile-owner">
                        <div class="profile-user-left">
                            <div class="profile-user__logo">
                                <img class="profile-user__img" src="../../../static/images/Dima.jpg">
                                <a href="#" class="delete-photo">Удалить фото</a>
                            </div>
                        </div>
                        <div class="profile-user-right">
                            <h1 class="profile-user__name">ООО “ВАГОНСЕЛЬ”</h1>
                            <div class="owner-info-no-bottom">
                                <div class="owner-info-item">
                                    <span class="profile-user__city">Город:&nbsp</span>
                                    <span class="profile-user__city__name">Минск</span>
                                </div>

                                <div class="owner-info-item">
                                    <span class="profile-user__city">УНП:&nbsp</span>
                                    <span class="profile-user__city__name">Проверен</span>
                                </div>

                                <div class="owner-info-item">
                                    <span class="profile-user__city">Ниша:&nbsp</span>
                                    <span class="profile-user__city__name">Сфера красоты</span>
                                </div>

                                <div class="owner-info-item">
                                    <a style="display: block;" href="#" style="margin-bottom: 28px;" class="company-link">https://www.onliner.by/</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                {% endif %}

                <section style="display: flex; column-gap: 24px; margin-bottom: 24px;">
                    
                    <div class="container-scroll">
                        
                        <div class="flex">
                            <div class="reviews-container">
                                <div class="reviews-info">
                                    <div class="main-title profile-title">
                                        Отзывы&nbsp(11)
                                    </div>
                                    <div class="rating-small">
                                        <span class="active"></span>	
                                        <span class="active"></span>    
                                        <span class="active"></span>  
                                        <span class="active"></span>    
                                        <span class="not-active"></span>
                                    </div>
                                    <div class="count-reviews">4&nbspиз&nbsp5</div>
                                    <div class="reviews-stars"></div>
                                    <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                                    <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                                </div>

                                <div class="flex-column">
                                <div class="profile-user-small">

                                    <div class="profile-user-left">
                                        <div class="profile-user__logo-small"></div>
                                    </div>
                                <div class="profile-user-right">
                                    <h1 class="profile-user__name-small">Станислав Брониславович</h1>
                                    <div class="city-info-small info-flex">
                                        <div class="">
                                            <span class="profile-user__city-small">Город:&nbsp</span>
                                            <span class="profile-user__city__name-small">Минск</span>
                                        </div>
                                        <div class="date-review">15.01.2023</div>
                                    </div>
                                    <div class="profile__remark-small">
                                        Пишитие, пожалуйста с 9 до 20 в вайбер на номер телфона, укакзанный в контактах. Я люблю пельмени. Я работал с этой компанией 10 лет, все очень круто, парни молодцы!
                                    </div>
                                    <div class="flex">
                                        <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                                        <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                                </div>
                                </div>
                            </div>

                            <div class="profile-user-small">

                                <div class="profile-user-left">
                                    <div class="profile-user__logo-small"></div>
                                </div>
                            <div class="profile-user-right">
                                <h1 class="profile-user__name-small">Станислав Брониславович</h1>
                                <div class="city-info-small info-flex">
                                    <div class="">
                                        <span class="profile-user__city-small">Город:&nbsp</span>
                                        <span class="profile-user__city__name-small">Минск</span>
                                    </div>
                                    <div class="date-review">15.01.2023</div>
                                </div>
                                <div class="profile__remark-small">
                                    Пишитие, пожалуйста с 9 до 20 в вайбер на номер телфона, укакзанный в контактах. Я люблю пельмени. Я работал с этой компанией 10 лет, все очень круто, парни молодцы!
                                </div>
                                <div class="flex">
                                    <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                                    <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                            </div>
                            </div>
                        </div>

                        <div class="profile-user-small">

                            <div class="profile-user-left">
                                <div class="profile-user__logo-small"></div>
                            </div>
                        <div class="profile-user-right">
                            <h1 class="profile-user__name-small">Станислав Брониславович</h1>
                            <div class="city-info-small info-flex">
                                <div class="">
                                    <span class="profile-user__city-small">Город:&nbsp</span>
                                    <span class="profile-user__city__name-small">Минск</span>
                                </div>
                                <div class="date-review">15.01.2023</div>
                            </div>
                            <div class="profile__remark-small">
                                Пишитие, пожалуйста с 9 до 20 в вайбер на номер телфона, укакзанный в контактах. Я люблю пельмени. Я работал с этой компанией 10 лет, все очень круто, парни молодцы!
                            </div>
                            <div class="flex">
                                <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                                <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                        </div>
                        </div>
                    </div>

                    <div class="profile-user-small">

                        <div class="profile-user-left">
                            <div class="profile-user__logo-small"></div>
                        </div>
                    <div class="profile-user-right">
                        <h1 class="profile-user__name-small">Станислав Брониславович</h1>
                        <div class="city-info-small info-flex">
                            <div class="">
                                <span class="profile-user__city-small">Город:&nbsp</span>
                                <span class="profile-user__city__name-small">Минск</span>
                            </div>
                            <div class="date-review">15.01.2023</div>
                        </div>
                        <div class="profile__remark-small">
                            Пишитие, пожалуйста с 9 до 20 в вайбер на номер телфона, укакзанный в контактах. Я люблю пельмени. Я работал с этой компанией 10 лет, все очень круто, парни молодцы!
                        </div>
                        <div class="flex">
                            <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                            <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                    </div>
                    </div>
                </div>

                        <div class="profile-user-small">

                            <div class="profile-user-left">
                                <div class="profile-user__logo-small"></div>
                            </div>
                        <div class="profile-user-right">
                            <h1 class="profile-user__name-small">Станислав Брониславович</h1>
                            <div class="city-info-small info-flex">
                                <div class="">
                                    <span class="profile-user__city-small">Город:&nbsp</span>
                                    <span class="profile-user__city__name-small">Минск</span>
                                </div>
                                <div class="date-review">15.01.2023</div>
                            </div>
                            <div class="profile__remark-small">
                                Пишитие, пожалуйста с 9 до 20 в вайбер на номер телфона, укакзанный в контактах. Я люблю пельмени. Я работал с этой компанией 10 лет, все очень круто, парни молодцы!
                            </div>
                            <div class="flex">
                                <a href="#" class="read-reviews">Читать&nbspвсе&nbspотзывы</a>
                                <a href="#" class="write-reviews">Написать&nbspотзыв</a>
                        </div>
                        </div>
                        </div>
                        <div style="padding-top: 40px;" class=""></div>
                                </div>
                           
                            </div>
                        </div>
                      </div>

                    {% if owner %}

                        <div class="container"> 
                            <h2 class="main-title">Компании</h2>

                            <!-- с текстом -->
                            {% if company.owner.bio %}
                             <div style="margin-bottom: 25px;" class="profile-user-small">
                                <div class="profile-user-left">
                                    <div class="profile-user__logo-small"></div>
                                </div>
                                <div class="profile-user-right">
                                <h1 class="profile-user__name-small">{{company.owner.first_name}} {{company.owner.last_name}}</h1>
                                <div class="city-info-small">
                                    <span class="profile-user__city-small">Город:&nbsp</span>
                                    <span class="profile-user__city__name-small">{{company.owner.profile_set.all.0.city.city}}</span>
                                </div>
                                <div class="profile__remark-small">
                                    {{company.owner.bio}}
                                </div>
                                </div>
                            </div>

                            {% else %}

                            <!-- без текста -->

                            <div style="margin-bottom: 25px; align-items: center;" class="profile-user-small">
                                <div class="profile-user-left">
                                    <div class="profile-user__logo-small"></div>
                                </div>
                                <div class="profile-user-right">
                                <h1 class="profile-user__name-small">{{company.owner.first_name}} {{company.owner.last_name}}</h1>
                                <div class="">
                                    <span class="profile-user__city-small">Город:&nbsp</span>
                                    <span class="profile-user__city__name-small">{{company.owner.profile_set.all.0.city.city}}</span>
                                </div>
                                </div>
                            </div>

                            {% endif %}

                            <div class="profile-user__mail">
                                <p class="user__mail">{{company.owner.email}}</p>
                            </div>
                            {% if company.owner.profile_set.all.0.phone_num_show %}
                            <div class="profile-user__phone">
                                <p class="user__phone">{{company.owner.profile_set.all.0.phone_num}}</p>
                                    {% if owner %}
                                <img src="{% static 'images/edit.png' %}" alt="фото" class="user__phone__logo">
                                {% endif %}
                        </div>
                            {% endif %}
                        </div>

                            {% endif %}

                </section>

                {% if owner %}

                <section>
                    <div class="card-container">
                        <div class="flex-32">
                        <p class="main-title">
                            Компании
                        </p>
                        <a href="{% url 'offers:create-offer' company.id %}" class="add-offer-no-change">Добавить предложение</a>
                    </div>


                            <div class="grid">
                                <div class="grid-sizer"></div>
                                <div class="gutter-sizer"></div>
                                
                {% for offer in company.offers_set.all %}

                                <div id="offer-{{offer.id}}" class="company-card grid-item">
                                    <div class="company-card-top">
                                        <div class="company-card-logo"></div>
                                        <p class="company-card-name">{{offer.company.title}}</p>
                                    </div>
                                    <hr class="card-hr-solid">
                                    <div class="company-card-main"> 
                                        <div class="company-content-left">
                                            <div style="margin-bottom: 12px;" class="">
                                                <p class="company-key">{{offer.type}}</p>
                                                <p class="company-value no-bottom">{{offer.title}}</p>
                                            </div>
                                            <div class=""> 
                                                <p class="company-key">Розничная цена</p>
                                                <p class="company-value no-bottom">{{offer.retail_price}} {{offer.currency}}</p>
                                            </div>
                                        </div>
                                        <!-- <div class="hr-solid-vertical"></div> -->
                                        <div class="company-content-right">
                                            <div class="flex-content-no-gap">
                                                <div class="">
                                                <p class="company-key">Количество купонов</p>
                                                <p class="company-value">{{offer.amount}}</p>
                                                </div>
                                                
                                                <div class="">
                                                <p class="company-key">Цена купона</p>
                                                <p class="company-value no-bottom">{{offer.coupon_price}} {{offer.currency}}</p>
                                                </div>    
                                            </div>
                                        </div> 
                                    </div>
                
                                    <hr class="card-hr-solid">                
                                    <div class="company-card-main"> 
                                        <div class="card-button-single">
                                        <div class="flex-content">
                                            <button style="margin-top: -2px; max-width: 100%;" class="button">
                                                <p class="button-p">Посмотреть вложения</p>
                                            </button>
                                        </div>
                                    </div>
                                    </div>
                                    <hr style="margin-bottom: 20px;" class="card-hr-solid">
                                    <div class="company-card-buttons">
                                        <button class="button button-282px" onclick="window.location.href = '{% url 'offers:update-offer' offer.id %}'">
                                            <p class="button-p">Редактировать предложение</p>
                                        </button>
                                        <button class="button button-282px" onclick="deleteOffer({{offer.id}})">
                                            <p class="button-p">Удалить предложение</p>
                                        </button>
                                    </div>
                                </div>

                                {% endfor %}

                                </div>
                            </div>
                </section>

                {% else %}

                <section>
                    <div class="card-container">
                        <div class="flex-32">
                        <p class="main-title">
                            Компании
                        </p>
                    </div>

                            <div class="grid">
                                <div class="grid-sizer"></div>
                                <div class="gutter-sizer"></div>

                                {% for offer in company.offers_set.all %}

                <div class="company-card grid-item">
                                    <div class="company-card-top">
                                        <div class="company-card-logo"></div>
                                        <p class="company-card-name">{{offer.company.title}}</p>
                                    </div>
                                    <hr class="card-hr-solid">
                                    <div class="company-card-main">
                                        <div class="company-content-left">
                                            <div style="margin-bottom: 12px;" class="">
                                                <p class="company-key">{{offer.type}}</p>
                                                <p class="company-value no-bottom">{{offer.title}} </p>
                                            </div>
                                            <div class="">
                                                <p class="company-key">Розничная цена</p>
                                                <p class="company-value no-bottom">{{offer.retail_price}} {{offer.currency}}</p>
                                            </div>
                                        </div>
                                        <!-- <div class="hr-solid-vertical"></div> -->
                                        <div class="company-content-right">
                                            <div class="flex-content-no-gap">
                                                <div class="">
                                                <p class="company-key">Количество купонов</p>
                                                <p class="company-value">{{offer.amount}}</p>
                                                </div>

                                                <div class="">
                                                <p class="company-key">Цена купона</p>
                                                <p class="company-value no-bottom">{{offer.coupon_price}} {{offer.currency}}</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                    <hr class="card-hr-solid">
                                    <div class="company-card-main">
                                        <div class="card-button-single">
                                        <div class="flex-content">
                                            <button style="margin-top: -2px; max-width: 100%;" class="button">
                                                <p class="button-p">Посмотреть вложения</p>
                                            </button>
                                        </div>
                                    </div>
                                    </div>
                                    <hr class="card-hr-solid">
                                </div>

                    {% endfor %}

                            </div>
                    </div>
                </section>

                {% endif %}

            </div>
        </div>
        </main>

        {% include "footer.html" %}

        <!-- <div class="bottom-margin"></div> -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="{% static 'js/sort-companies.js' %}"></script>
    <script src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha384-GNFwBvfVxBkLMJpYMOABq3c+d3KnQxudP/mGPkzpZSTYykLBNsZEnG2D9G/X/+7D" crossorigin="anonymous" async></script>
    <script>
    function deleteOffer(id)
{
  var action = confirm("Are you sure you want to delete this user?");
  if (action != false)
  {
    $.ajax(
    {
        url: '{% url "offers:delete-offer" %}',
        data: {
            'id': id,
             'csrfmiddlewaretoken': '{{ csrf_token }}'
        },
        dataType: 'json',
        success: function(data) {
              $("#offer-" + id).remove();
        },
        type: "POST",

    });
  }
}</script>




    </body>
{% endblock %}
</html>